var webSocket,netConfig,sendRequest=function(n){if(console.log("sendRequest:",n),webSocket.readyState===WebSocket.OPEN){var t=JSON.stringify(n);webSocket.send(t)}else $("#spanStatus").text("Connection is closed")},showError=function(n,t){$("#spanText").append('<div class="alert alert-danger">'+(t?"<b>"+t+":<\/b> ":"")+n+"<\/div>")},readConfig=function(){sendRequest({Action:"getnetconfig"})};$().ready(function(){var n=window.location.host;webSocket=new WebSocket("ws://"+n+"/brain-torus");webSocket.onopen=function(){$("#spanStatus").text("connected");readConfig()};webSocket.onmessage=function(n){var t=JSON.parse(n.data);if(console.log("onmessage:",n.data,t),typeof t.Error!="undefined"&&t.Error)showError(t.Error,t.Action);else switch(t.Action){case"getnetconfig":netConfig=t}};webSocket.onerror=function(n){console.log(n);showError(n.message)};webSocket.onclose=function(){console.log(arguments);var t=arguments,n="";typeof arguments!==undefined&&arguments.length>0&&typeof arguments[0].reason!="undefined"&&(n=" reason: "+arguments[0].reason);$("#spanStatus").text("disconnected."+n)}});